# Developer Dashboard - System Architecture

## ğŸ›ï¸ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USER BROWSER                          â”‚
â”‚                    (http://localhost:5173)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ HTTP/HTTPS
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FRONTEND (React/Vite)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              App.tsx (Router)                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  DeveloperDashboardPage                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€ PortfolioOverview                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€ ProjectDashboard                          â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚        Custom Hooks (useDeveloperDashboardData)       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                         â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚      API Service (developerDashboard.api.ts)          â”‚ â”‚
â”‚  â”‚      - getPortfolioOverview()                         â”‚ â”‚
â”‚  â”‚      - getProjects()                                  â”‚ â”‚
â”‚  â”‚      - getProjectDashboard()                          â”‚ â”‚
â”‚  â”‚      - getBudgetLineItems()                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ REST API
                          â”‚ /api/developer-dashboard/*
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               BACKEND (Node.js/Express)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         Authentication Middleware                     â”‚   â”‚
â”‚  â”‚         - Verify JWT Token                           â”‚   â”‚
â”‚  â”‚         - Extract userId & customerId                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    Developer Dashboard Routes                         â”‚   â”‚
â”‚  â”‚    (backend/src/routes/developer-dashboard.ts)        â”‚   â”‚
â”‚  â”‚    - GET  /portfolio/overview                         â”‚   â”‚
â”‚  â”‚    - GET  /projects                                   â”‚   â”‚
â”‚  â”‚    - GET  /projects/:id/dashboard                     â”‚   â”‚
â”‚  â”‚    - POST /projects                                   â”‚   â”‚
â”‚  â”‚    - GET  /projects/:id/budget                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Prisma ORM                               â”‚   â”‚
â”‚  â”‚              - Query Builder                          â”‚   â”‚
â”‚  â”‚              - Type Safety                            â”‚   â”‚
â”‚  â”‚              - Relationship Management                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ SQL Queries
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DATABASE (PostgreSQL)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  developer_projects                                     â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ id, name, description, projectType                â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ stage, status, progress                           â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ totalBudget, actualSpend                          â”‚  â”‚
â”‚  â”‚  â””â”€â”€ developerId, customerId                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  budget_line_items                                      â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ id, projectId, category                           â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ plannedAmount, actualAmount                       â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ variance, variancePercent                         â”‚  â”‚
â”‚  â”‚  â””â”€â”€ status                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  project_invoices                                       â”‚  â”‚
â”‚  â”‚  project_vendors                                        â”‚  â”‚
â”‚  â”‚  project_forecasts                                      â”‚  â”‚
â”‚  â”‚  project_milestones                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Frontend Module Structure

```
src/modules/developer-dashboard/
â”‚
â”œâ”€â”€ index.ts                          # Module exports
â”‚
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts                      # TypeScript type definitions
â”‚       â”œâ”€â”€ DeveloperProject
â”‚       â”œâ”€â”€ BudgetLineItem
â”‚       â”œâ”€â”€ ProjectInvoice
â”‚       â”œâ”€â”€ ProjectVendor
â”‚       â””â”€â”€ API Request/Response types
â”‚
â”œâ”€â”€ services/
â”‚   â””â”€â”€ developerDashboard.api.ts    # API service layer
â”‚       â”œâ”€â”€ getPortfolioOverview()
â”‚       â”œâ”€â”€ getProjects()
â”‚       â”œâ”€â”€ getProjectDashboard()
â”‚       â”œâ”€â”€ createProject()
â”‚       â”œâ”€â”€ updateProject()
â”‚       â”œâ”€â”€ getBudgetLineItems()
â”‚       â””â”€â”€ ... (20+ API functions)
â”‚
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useDeveloperDashboardData.ts # Custom React hooks
â”‚       â”œâ”€â”€ usePortfolioOverview()
â”‚       â”œâ”€â”€ useProjects()
â”‚       â”œâ”€â”€ useProjectDashboard()
â”‚       â”œâ”€â”€ useBudgetLineItems()
â”‚       â””â”€â”€ useDebounce()
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ KPICard.tsx                  # Reusable KPI card
â”‚   â”‚   â””â”€â”€ Props: title, value, icon, trend, status
â”‚   â”‚
â”‚   â”œâ”€â”€ ProjectCard.tsx              # Project summary card
â”‚   â”‚   â””â”€â”€ Props: project, onView, currency
â”‚   â”‚
â”‚   â”œâ”€â”€ BudgetTable.tsx              # Interactive budget table
â”‚   â”‚   â””â”€â”€ Props: items, editable, onEdit, onDelete
â”‚   â”‚
â”‚   â”œâ”€â”€ BudgetVsActualChart.tsx      # Bar chart component
â”‚   â”‚   â””â”€â”€ Props: data, currency, title
â”‚   â”‚
â”‚   â”œâ”€â”€ PortfolioOverview.tsx        # Main portfolio view
â”‚   â”‚   â”œâ”€â”€ KPI Cards (4)
â”‚   â”‚   â”œâ”€â”€ Filters & Search
â”‚   â”‚   â””â”€â”€ Project Grid
â”‚   â”‚
â”‚   â””â”€â”€ ProjectDashboard.tsx         # Detailed project view
â”‚       â”œâ”€â”€ Header & Progress
â”‚       â”œâ”€â”€ KPI Cards (4)
â”‚       â”œâ”€â”€ Alerts Section
â”‚       â””â”€â”€ Tabbed Content
â”‚           â”œâ”€â”€ Overview Tab
â”‚           â”œâ”€â”€ Budget Tab
â”‚           â””â”€â”€ Invoices Tab
â”‚
â””â”€â”€ pages/
    â””â”€â”€ DeveloperDashboardPage.tsx   # Main container page
        â””â”€â”€ View Mode: portfolio | project
```

---

## ğŸ”„ Data Flow

### 1. Portfolio Overview Flow

```
User Opens Dashboard
        â”‚
        â–¼
DeveloperDashboardPage
        â”‚
        â–¼
PortfolioOverview Component
        â”‚
        â”œâ”€â”€â–º usePortfolioOverview Hook
        â”‚    â”‚
        â”‚    â–¼
        â”‚    getPortfolioOverview() API
        â”‚    â”‚
        â”‚    â–¼
        â”‚    GET /api/developer-dashboard/portfolio/overview
        â”‚    â”‚
        â”‚    â–¼
        â”‚    Backend: Aggregate all projects
        â”‚    â”‚
        â”‚    â–¼
        â”‚    Database: Query developer_projects
        â”‚    â”‚
        â”‚    â–¼
        â”‚    Return: { totalProjects, totalBudget, ... }
        â”‚
        â””â”€â”€â–º useProjects Hook
             â”‚
             â–¼
             getProjects() API
             â”‚
             â–¼
             GET /api/developer-dashboard/projects
             â”‚
             â–¼
             Backend: Filter, sort, paginate
             â”‚
             â–¼
             Database: Query with WHERE, ORDER BY, LIMIT
             â”‚
             â–¼
             Return: { data: [...], pagination: {...} }
```

### 2. Project Dashboard Flow

```
User Clicks Project Card
        â”‚
        â–¼
onViewProject(projectId)
        â”‚
        â–¼
ProjectDashboard Component
        â”‚
        â–¼
useProjectDashboard Hook
        â”‚
        â–¼
getProjectDashboard() API
        â”‚
        â–¼
GET /api/developer-dashboard/projects/:id/dashboard
        â”‚
        â–¼
Backend: Parallel Queries
        â”œâ”€â”€â–º Get project details
        â”œâ”€â”€â–º Get budget line items
        â”œâ”€â”€â–º Get invoices (with vendors)
        â”œâ”€â”€â–º Get forecasts
        â”œâ”€â”€â–º Get milestones
        â””â”€â”€â–º Calculate aggregations
        â”‚
        â–¼
Database: Multiple JOIN queries
        â”‚
        â–¼
Return: {
    project: {...},
    budgetLineItems: [...],
    invoices: [...],
    budgetByCategory: [...],
    alerts: [...]
}
```

### 3. Budget Update Flow

```
User Edits Budget Item
        â”‚
        â–¼
BudgetTable: handleSaveEdit()
        â”‚
        â–¼
onUpdate(itemId, updates)
        â”‚
        â–¼
updateBudgetLineItem() API
        â”‚
        â–¼
PATCH /api/developer-dashboard/projects/:id/budget/:itemId
        â”‚
        â–¼
Backend: Calculate variance
        variance = actualAmount - plannedAmount
        variancePercent = (variance / plannedAmount) * 100
        â”‚
        â–¼
Database: UPDATE budget_line_items
        â”‚
        â–¼
Return: Updated item
        â”‚
        â–¼
Hook: Refetch data
        â”‚
        â–¼
UI: Re-render with new data
```

---

## ğŸ” Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Security Layers                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 1: Authentication
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  JWT Token Verification                                  â”‚
â”‚  - Token in Authorization header                         â”‚
â”‚  - Verify signature                                      â”‚
â”‚  - Check expiration                                      â”‚
â”‚  - Extract userId & customerId                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
Layer 2: Authorization
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Role-Based Access Control                               â”‚
â”‚  - Check user role = 'developer'                         â”‚
â”‚  - Verify user is active                                 â”‚
â”‚  - Check subscription status                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
Layer 3: Data Isolation
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Multi-Tenancy Enforcement                               â”‚
â”‚  - Filter by customerId                                  â”‚
â”‚  - Filter by developerId                                 â”‚
â”‚  - Prevent cross-customer access                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
Layer 4: Input Validation
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Data Validation                                         â”‚
â”‚  - Type checking (TypeScript)                            â”‚
â”‚  - Schema validation (Zod/Joi)                           â”‚
â”‚  - SQL injection prevention (Prisma)                     â”‚
â”‚  - XSS protection (sanitization)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Database Schema Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   customers     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ id        â”‚â—„â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ company   â”‚  â”‚          â”‚
â”‚  â”‚ ...       â”‚  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚     users       â”‚          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚          â”‚
â”‚  â”‚ id        â”‚â—„â”€â”¼â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ role      â”‚  â”‚      â”‚   â”‚
â”‚  â”‚ customerIdâ”œâ”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
        â”‚                    â”‚
        â”‚ developerId        â”‚
        â”‚                    â”‚
        â–¼                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  developer_projects     â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚ id               â”‚â—„â”€â”€â”¼â”€â”€â”¼â”€â”€â”€â”€â”€â”
â”‚  â”‚ name             â”‚   â”‚  â”‚     â”‚
â”‚  â”‚ developerId      â”œâ”€â”€â”€â”¼â”€â”€â”˜     â”‚
â”‚  â”‚ customerId       â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  â”‚ totalBudget      â”‚   â”‚
â”‚  â”‚ actualSpend      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ projectId
        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                      â”‚
        â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ budget_line_itemsâ”‚   â”‚ project_invoices â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ id         â”‚  â”‚   â”‚  â”‚ id         â”‚  â”‚
â”‚  â”‚ projectId  â”œâ”€â”€â”¼â”€â”€â”€â”¤  â”‚ projectId  â”œâ”€â”€â”¤
â”‚  â”‚ category   â”‚  â”‚   â”‚  â”‚ vendorId   â”œâ”€â”€â”¼â”€â”€â”
â”‚  â”‚ planned    â”‚  â”‚   â”‚  â”‚ amount     â”‚  â”‚  â”‚
â”‚  â”‚ actual     â”‚  â”‚   â”‚  â”‚ status     â”‚  â”‚  â”‚
â”‚  â”‚ variance   â”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
        â”‚                                    â”‚
        â”‚                                    â”‚
        â–¼                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚project_forecasts â”‚           â”‚ project_vendors  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ id         â”‚  â”‚           â”‚  â”‚ id         â”‚  â”‚
â”‚  â”‚ projectId  â”œâ”€â”€â”¤           â”‚  â”‚ customerId â”œâ”€â”€â”¤
â”‚  â”‚ type       â”‚  â”‚           â”‚  â”‚ name       â”‚  â”‚
â”‚  â”‚ predicted  â”‚  â”‚           â”‚  â”‚ rating     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚project_milestonesâ”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ id         â”‚  â”‚
â”‚  â”‚ projectId  â”œâ”€â”€â”¤
â”‚  â”‚ name       â”‚  â”‚
â”‚  â”‚ targetDate â”‚  â”‚
â”‚  â”‚ status     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Component Hierarchy

```
DeveloperDashboardPage
â”‚
â”œâ”€â”€ [State: viewMode, selectedProjectId]
â”‚
â”œâ”€â”€ IF viewMode === 'portfolio'
â”‚   â”‚
â”‚   â””â”€â”€ PortfolioOverview
â”‚       â”‚
â”‚       â”œâ”€â”€ Header
â”‚       â”‚   â”œâ”€â”€ Title & Description
â”‚       â”‚   â””â”€â”€ "New Project" Button
â”‚       â”‚
â”‚       â”œâ”€â”€ KPI Cards Row
â”‚       â”‚   â”œâ”€â”€ KPICard (Total Projects)
â”‚       â”‚   â”œâ”€â”€ KPICard (Total Budget)
â”‚       â”‚   â”œâ”€â”€ KPICard (Actual Spend)
â”‚       â”‚   â””â”€â”€ KPICard (Variance)
â”‚       â”‚
â”‚       â”œâ”€â”€ Filters Bar
â”‚       â”‚   â”œâ”€â”€ Search Input
â”‚       â”‚   â”œâ”€â”€ Status Select
â”‚       â”‚   â”œâ”€â”€ Stage Select
â”‚       â”‚   â””â”€â”€ Sort Select
â”‚       â”‚
â”‚       â”œâ”€â”€ Projects Grid
â”‚       â”‚   â”œâ”€â”€ ProjectCard
â”‚       â”‚   â”œâ”€â”€ ProjectCard
â”‚       â”‚   â””â”€â”€ ProjectCard
â”‚       â”‚
â”‚       â””â”€â”€ Pagination
â”‚           â”œâ”€â”€ Previous Button
â”‚           â””â”€â”€ Next Button
â”‚
â””â”€â”€ IF viewMode === 'project'
    â”‚
    â””â”€â”€ ProjectDashboard
        â”‚
        â”œâ”€â”€ Header
        â”‚   â”œâ”€â”€ Back Button
        â”‚   â”œâ”€â”€ Project Title & Meta
        â”‚   â””â”€â”€ "Generate Report" Button
        â”‚
        â”œâ”€â”€ Progress Card
        â”‚   â””â”€â”€ Progress Bar
        â”‚
        â”œâ”€â”€ KPI Cards Row
        â”‚   â”œâ”€â”€ KPICard (Budget)
        â”‚   â”œâ”€â”€ KPICard (Spend)
        â”‚   â”œâ”€â”€ KPICard (Variance)
        â”‚   â””â”€â”€ KPICard (Invoices)
        â”‚
        â”œâ”€â”€ Alerts Card (if alerts)
        â”‚   â””â”€â”€ Alert List
        â”‚
        â””â”€â”€ Tabs
            â”‚
            â”œâ”€â”€ Overview Tab
            â”‚   â”œâ”€â”€ BudgetVsActualChart
            â”‚   â””â”€â”€ Description Card
            â”‚
            â”œâ”€â”€ Budget Tab
            â”‚   â””â”€â”€ BudgetTable
            â”‚       â”œâ”€â”€ Table Header
            â”‚       â”œâ”€â”€ Table Rows
            â”‚       â””â”€â”€ Summary Footer
            â”‚
            â””â”€â”€ Invoices Tab
                â””â”€â”€ Invoice List
                    â”œâ”€â”€ Invoice Item
                    â”œâ”€â”€ Invoice Item
                    â””â”€â”€ Invoice Item
```

---

## ğŸ”„ State Management

```
Component State (useState)
â”œâ”€â”€ DeveloperDashboardPage
â”‚   â”œâ”€â”€ viewMode: 'portfolio' | 'project'
â”‚   â””â”€â”€ selectedProjectId: string | null
â”‚
â”œâ”€â”€ PortfolioOverview
â”‚   â”œâ”€â”€ searchTerm: string
â”‚   â”œâ”€â”€ statusFilter: string
â”‚   â”œâ”€â”€ stageFilter: string
â”‚   â”œâ”€â”€ sortBy: ProjectSortOptions
â”‚   â””â”€â”€ currentPage: number
â”‚
â”œâ”€â”€ ProjectDashboard
â”‚   â””â”€â”€ activeTab: 'overview' | 'budget' | 'invoices'
â”‚
â””â”€â”€ BudgetTable
    â”œâ”€â”€ editingId: string | null
    â””â”€â”€ editValues: Partial<BudgetLineItem>

Server State (Custom Hooks)
â”œâ”€â”€ usePortfolioOverview()
â”‚   â”œâ”€â”€ data: PortfolioOverview | null
â”‚   â”œâ”€â”€ loading: boolean
â”‚   â”œâ”€â”€ error: string | null
â”‚   â””â”€â”€ refetch: () => void
â”‚
â”œâ”€â”€ useProjects()
â”‚   â”œâ”€â”€ data: DeveloperProject[]
â”‚   â”œâ”€â”€ pagination: PaginationInfo
â”‚   â”œâ”€â”€ loading: boolean
â”‚   â”œâ”€â”€ error: string | null
â”‚   â””â”€â”€ refetch: () => void
â”‚
â””â”€â”€ useProjectDashboard()
    â”œâ”€â”€ data: ProjectDashboardData | null
    â”œâ”€â”€ loading: boolean
    â”œâ”€â”€ error: string | null
    â””â”€â”€ refetch: () => void
```

---

## ğŸš€ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRODUCTION                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Frontend (Vercel/Netlify)
â”œâ”€â”€ Static Assets (CDN)
â”œâ”€â”€ React App Bundle
â””â”€â”€ Environment Variables
    â””â”€â”€ VITE_API_URL

Backend (DigitalOcean/AWS)
â”œâ”€â”€ Node.js Server
â”œâ”€â”€ Express API
â”œâ”€â”€ Prisma Client
â””â”€â”€ Environment Variables
    â”œâ”€â”€ DATABASE_URL
    â”œâ”€â”€ JWT_SECRET
    â””â”€â”€ CORS_ORIGIN

Database (PostgreSQL)
â”œâ”€â”€ Managed Database Service
â”œâ”€â”€ Automated Backups
â”œâ”€â”€ Connection Pooling
â””â”€â”€ SSL Encryption

Monitoring
â”œâ”€â”€ Error Tracking (Sentry)
â”œâ”€â”€ Performance Monitoring
â”œâ”€â”€ Log Aggregation
â””â”€â”€ Uptime Monitoring
```

---

This architecture provides a scalable, maintainable, and secure foundation for the Property Developer Dashboard feature.

